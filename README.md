# æ— äººæœºé€šä¿¡æ•°æ®åˆ†æç³»ç»Ÿ

åŸºäº [udp-latency é¡¹ç›®](https://github.com/XiaoDcs/udp-latency) å¼€å‘çš„æ— äººæœºé€šä¿¡æµ‹è¯•æ•°æ®åˆ†æç³»ç»Ÿï¼Œæä¾›å…¨é¢çš„æ•°æ®åˆ†æå’Œå¯è§†åŒ–åŠŸèƒ½ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### æ•°æ®åˆ†æèƒ½åŠ›
- **UDPé€šä¿¡æ€§èƒ½åˆ†æ**ï¼šå»¶è¿Ÿç»Ÿè®¡ã€ä¸¢åŒ…ç‡ã€ååé‡åˆ†æ
- **NEXFIé€šä¿¡è´¨é‡åˆ†æ**ï¼šRSSIã€SNRã€é“¾è·¯è´¨é‡ã€ååé‡åˆ†æ
- **GPSè½¨è¿¹åˆ†æ**ï¼š3Dé£è¡Œè½¨è¿¹ã€é€Ÿåº¦ã€é«˜åº¦å˜åŒ–åˆ†æ
- **è·ç¦»åˆ†æ**ï¼šåŒæœºé—´è·ç¦»å˜åŒ–åŠç»Ÿè®¡åˆ†æ
- **ç›¸å…³æ€§åˆ†æ**ï¼šé€šä¿¡è´¨é‡ä¸è·ç¦»çš„ç›¸å…³æ€§åˆ†æ

### å¯è§†åŒ–å±•ç¤º
- äº¤äº’å¼3Dè½¨è¿¹å›¾
- å®æ—¶æ€§èƒ½æŒ‡æ ‡ä»ªè¡¨æ¿
- å¤šç»´åº¦ç»Ÿè®¡å›¾è¡¨
- ç›¸å…³æ€§æ•£ç‚¹å›¾å’Œè¶‹åŠ¿åˆ†æ

### Webç•Œé¢
- ç°ä»£åŒ–å“åº”å¼Webç•Œé¢
- å¤šæ•°æ®é›†ç®¡ç†å’Œæ¯”è¾ƒ
- å®æ—¶æ•°æ®åŠ è½½å’Œå±•ç¤º
- åˆ†ææŠ¥å‘Šå¯¼å‡ºåŠŸèƒ½

## ğŸ“¦ å®‰è£…è¦æ±‚

### Pythonç¯å¢ƒ
```bash
Python >= 3.8
```

### è™šæ‹Ÿç¯å¢ƒå®‰è£…ï¼ˆæ¨èï¼‰
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv drone_analysis_env

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# macOS/Linux:
source drone_analysis_env/bin/activate
# Windows:
# drone_analysis_env\Scripts\activate

# å®‰è£…ä¾èµ–åŒ…
pip install pandas numpy matplotlib seaborn plotly scipy flask
```

## ğŸ“‚ é¡¹ç›®ç»“æ„

```
udp-latency-data-analysis/
â”œâ”€â”€ drone_communication_analyzer.py  # æ ¸å¿ƒåˆ†æå¼•æ“
â”œâ”€â”€ visualization.py                 # å¯è§†åŒ–æ¨¡å—
â”œâ”€â”€ web_app.py                      # Flask Webåº”ç”¨
â”œâ”€â”€ demo.py                         # æ¼”ç¤ºè„šæœ¬
â”œâ”€â”€ requirements.txt                # ä¾èµ–åˆ—è¡¨
â”œâ”€â”€ README.md                       # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ .gitignore                      # Gitå¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ templates/                      # Webæ¨¡æ¿
â”‚   â”œâ”€â”€ base.html
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ dashboard.html
â””â”€â”€ data/                          # æ•°æ®å­˜å‚¨ç›®å½•
    â””â”€â”€ æ•°æ®é›†æ–‡ä»¶å¤¹ï¼ˆå¦‚ï¼š20250612190350ï¼‰/
        â”œâ”€â”€ sender/                # å‘é€æ–¹æ•°æ®
        â”‚   â”œâ”€â”€ udp_sender_*.csv
        â”‚   â”œâ”€â”€ nexfi_status_*.csv
        â”‚   â””â”€â”€ gps_logger_*.csv
        â””â”€â”€ receiver/              # æ¥æ”¶æ–¹æ•°æ®
            â”œâ”€â”€ udp_receiver_*.csv
            â”œâ”€â”€ nexfi_status_*.csv
            â””â”€â”€ gps_logger_*.csv
```

## ğŸ“‚ æ•°æ®æ ¼å¼è¦æ±‚

ç³»ç»Ÿæ”¯æŒåˆ†æåŒ…å«ä»¥ä¸‹ç»“æ„çš„æ•°æ®æ–‡ä»¶å¤¹ï¼Œ**æ‰€æœ‰æ•°æ®é›†åº”æ”¾åœ¨ `data/` ç›®å½•ä¸‹**ï¼š

```
data/
â””â”€â”€ æ•°æ®é›†æ–‡ä»¶å¤¹åç§°ï¼ˆå¦‚ï¼š20250612190350ï¼‰/
    â”œâ”€â”€ sender/                    # å‘é€æ–¹æ•°æ®
    â”‚   â”œâ”€â”€ udp_sender_*.csv      # UDPå‘é€æ•°æ®
    â”‚   â”œâ”€â”€ nexfi_status_*.csv    # NEXFIé€šä¿¡çŠ¶æ€
    â”‚   â””â”€â”€ gps_logger_*.csv      # GPSä½ç½®æ•°æ®
    â””â”€â”€ receiver/                 # æ¥æ”¶æ–¹æ•°æ®
        â”œâ”€â”€ udp_receiver_*.csv    # UDPæ¥æ”¶æ•°æ®
        â”œâ”€â”€ nexfi_status_*.csv    # NEXFIé€šä¿¡çŠ¶æ€
        â””â”€â”€ gps_logger_*.csv      # GPSä½ç½®æ•°æ®
```

### æ–‡ä»¶æ ¼å¼è¯´æ˜

#### UDPå‘é€æ–¹æ•°æ® (udp_sender_*.csv)
```csv
seq_num,timestamp,packet_size
1,1749726272.1257734,1000
2,1749726272.2251344,1000
...
```

#### UDPæ¥æ”¶æ–¹æ•°æ® (udp_receiver_*.csv)
```csv
seq_num,send_timestamp,recv_timestamp,delay,src_ip,src_port,packet_size
2,1749726272.224993,1749726272.35602,0.1310269832611084,192.168.104.112,20002,1000
...
```

#### NEXFIé€šä¿¡çŠ¶æ€ (nexfi_status_*.csv)
```csv
timestamp,mesh_enabled,channel,frequency_band,tx_power,work_mode,node_id,connected_nodes,avg_rssi,avg_snr,throughput,cpu_usage,memory_usage,uptime,firmware_version,topology_nodes,link_quality
1749726241.37493,True,2A,10,33,adhoc,12,1,-38.0,57.0,6.408,0.60,0.419986,5479,MC1.0.127,2,191.0
...
```

#### GPSæ•°æ® (gps_logger_*.csv)
```csv
timestamp,latitude,longitude,altitude,local_x,local_y,local_z,connected,armed,offboard
1749726239.493269,34.03433114686528,108.76448924146617,397.0210266113281,2.7077839374542236,0.6664539575576782,-0.01397705078125,True,False,False
...
```

## ğŸ–¥ï¸ ä½¿ç”¨æ–¹æ³•

### 1. å¿«é€Ÿå¼€å§‹

#### æ•°æ®å‡†å¤‡
1. å°†æµ‹è¯•æ•°æ®æ–‡ä»¶å¤¹æ”¾å…¥ `data/` ç›®å½•
2. ç¡®ä¿æ•°æ®æ–‡ä»¶å¤¹åŒ…å« `sender/` å’Œ `receiver/` å­ç›®å½•
3. è¿è¡Œæ¼”ç¤ºè„šæœ¬æ£€æŸ¥æ•°æ®ç»“æ„ï¼š
```bash
python3 demo.py
```

#### å¯åŠ¨Webç•Œé¢
```bash
# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆå¦‚æœä½¿ç”¨ï¼‰
source drone_analysis_env/bin/activate

# å¯åŠ¨Webåº”ç”¨
python3 web_app.py
```

ç„¶ååœ¨æµè§ˆå™¨ä¸­è®¿é—®ï¼š`http://localhost:6500`

### 2. å‘½ä»¤è¡Œåˆ†æ

#### åŸºç¡€åˆ†æ
```python
from drone_communication_analyzer import DroneCommAnalyzer

# åˆ›å»ºåˆ†æå™¨ï¼ˆæ³¨æ„ï¼šæ•°æ®åœ¨dataç›®å½•ä¸‹ï¼‰
analyzer = DroneCommAnalyzer("data/20250612190350")

# è¿è¡Œå®Œæ•´åˆ†æ
analyzer.run_full_analysis()

# ä¿å­˜ç»“æœ
analyzer.save_results("analysis_results.json")
```

#### ç”Ÿæˆå¯è§†åŒ–å›¾è¡¨
```python
from visualization import DroneCommVisualizer

# åˆ›å»ºå¯è§†åŒ–å™¨
visualizer = DroneCommVisualizer(analyzer)
visualizer.create_all_plots()

# ä¿å­˜å›¾è¡¨ä¸ºHTMLæ–‡ä»¶
visualizer.save_plots_as_html("output_plots")
```

### 3. Webç•Œé¢ä½¿ç”¨

#### ä½¿ç”¨æµç¨‹
1. **é¦–é¡µ**ï¼šæŸ¥çœ‹å¯ç”¨çš„æ•°æ®é›†åˆ—è¡¨
2. **é€‰æ‹©æ•°æ®é›†**ï¼šç‚¹å‡»"å¼€å§‹åˆ†æ"æŒ‰é’®
3. **æŸ¥çœ‹ç»“æœ**ï¼šåœ¨ä»ªè¡¨æ¿ä¸­æµè§ˆåˆ†æç»“æœ
4. **åˆ‡æ¢æ ‡ç­¾**ï¼šæŸ¥çœ‹ä¸åŒç±»å‹çš„åˆ†æå’Œå›¾è¡¨
5. **æ•°æ®é›†æ¯”è¾ƒ**ï¼šå¯¹æ¯”å¤šä¸ªæµ‹è¯•ç»“æœ

## ğŸ“Š åˆ†æç»“æœè¯´æ˜

### UDPæ€§èƒ½æŒ‡æ ‡
- **ä¸¢åŒ…ç‡**ï¼š(å‘é€åŒ…æ•° - æ¥æ”¶åŒ…æ•°) / å‘é€åŒ…æ•° Ã— 100%
- **å»¶è¿Ÿç»Ÿè®¡**ï¼šå¹³å‡å€¼ã€ä¸­ä½æ•°ã€95%åˆ†ä½æ•°ã€99%åˆ†ä½æ•°
- **ååé‡**ï¼šæœ‰æ•ˆæ•°æ®ä¼ è¾“é€Ÿç‡ (kbps)

### NEXFIé€šä¿¡è´¨é‡
- **RSSI**ï¼šæ¥æ”¶ä¿¡å·å¼ºåº¦æŒ‡ç¤º (dBm)
- **SNR**ï¼šä¿¡å™ªæ¯” (dB)
- **é“¾è·¯è´¨é‡**ï¼šé€šä¿¡é“¾è·¯è´¨é‡è¯„åˆ†
- **ååé‡**ï¼šNEXFIå±‚é¢çš„æ•°æ®ååé‡ (Mbps)

### GPSè½¨è¿¹åˆ†æ
- **é£è¡Œè·ç¦»**ï¼šæ€»é£è¡Œè·¯å¾„é•¿åº¦
- **é«˜åº¦å˜åŒ–**ï¼šæœ€å¤§/æœ€å°é«˜åº¦åŠå˜åŒ–èŒƒå›´
- **é£è¡Œé€Ÿåº¦**ï¼šæœ€å¤§/å¹³å‡é£è¡Œé€Ÿåº¦
- **åŒæœºè·ç¦»**ï¼šä¸¤æ¶æ— äººæœºä¹‹é—´çš„å®æ—¶è·ç¦»

### ç›¸å…³æ€§åˆ†æ
- **å»¶è¿Ÿ-è·ç¦»ç›¸å…³æ€§**ï¼šUDPå»¶è¿Ÿä¸åŒæœºè·ç¦»çš„ç›¸å…³å…³ç³»
- **RSSI-è·ç¦»ç›¸å…³æ€§**ï¼šä¿¡å·å¼ºåº¦ä¸è·ç¦»çš„ç›¸å…³å…³ç³»
- **ç»Ÿè®¡æ˜¾è‘—æ€§**ï¼šç›¸å…³ç³»æ•°çš„på€¼æ£€éªŒ

## ğŸ”§ ç³»ç»Ÿæ‰©å±•

### æ·»åŠ æ–°çš„æ•°æ®é›†
1. å°†æ–°çš„æµ‹è¯•æ•°æ®æŒ‰ç…§æ ‡å‡†æ ¼å¼æ”¾å…¥ `data/` ç›®å½•
2. é‡æ–°å¯åŠ¨WebæœåŠ¡æˆ–ç‚¹å‡»"åˆ·æ–°"æŒ‰é’®
3. ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«æ–°çš„æ•°æ®é›†

### è‡ªå®šä¹‰åˆ†æ
```python
# è‡ªå®šä¹‰åˆ†ææŒ‡æ ‡
class CustomAnalyzer(DroneCommAnalyzer):
    def custom_analysis(self):
        # æ·»åŠ è‡ªå®šä¹‰åˆ†æé€»è¾‘
        pass

# ä½¿ç”¨è‡ªå®šä¹‰åˆ†æå™¨
analyzer = CustomAnalyzer("data/your_dataset_folder")
analyzer.run_full_analysis()
analyzer.custom_analysis()
```

### æ‰©å±•å¯è§†åŒ–
```python
# è‡ªå®šä¹‰å›¾è¡¨
class CustomVisualizer(DroneCommVisualizer):
    def create_custom_plot(self):
        # æ·»åŠ è‡ªå®šä¹‰å›¾è¡¨ç”Ÿæˆé€»è¾‘
        pass

visualizer = CustomVisualizer(analyzer)
visualizer.create_all_plots()
visualizer.create_custom_plot()
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **æ•°æ®ä½ç½®**ï¼šæ‰€æœ‰æµ‹è¯•æ•°æ®å¿…é¡»æ”¾åœ¨ `data/` ç›®å½•ä¸‹
2. **æ•°æ®æ ¼å¼**ï¼šç¡®ä¿CSVæ–‡ä»¶æ ¼å¼ä¸ç¤ºä¾‹ä¸€è‡´
3. **æ—¶é—´åŒæ­¥**ï¼šGPSå’Œé€šä¿¡æ•°æ®éœ€è¦æ—¶é—´åŒæ­¥ä»¥è¿›è¡Œå‡†ç¡®çš„ç›¸å…³æ€§åˆ†æ
4. **æ–‡ä»¶å¤§å°**ï¼šå¤§å‹æ•°æ®é›†å¯èƒ½éœ€è¦è¾ƒé•¿çš„å¤„ç†æ—¶é—´
5. **å†…å­˜ä½¿ç”¨**ï¼šå»ºè®®åœ¨å†…å­˜å……è¶³çš„ç¯å¢ƒä¸‹è¿è¡Œå¤§è§„æ¨¡æ•°æ®åˆ†æ

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ•°æ®åŠ è½½å¤±è´¥
- æ£€æŸ¥æ•°æ®æ˜¯å¦æ”¾åœ¨ `data/` ç›®å½•ä¸‹
- ç¡®è®¤æ–‡ä»¶è·¯å¾„å’Œæ ¼å¼æ­£ç¡®
- æ£€æŸ¥CSVæ–‡ä»¶åŒ…å«å¿…è¦çš„åˆ—
- éªŒè¯æ–‡ä»¶ç¼–ç ï¼ˆå»ºè®®ä½¿ç”¨UTF-8ï¼‰

#### 2. åˆ†æç»“æœå¼‚å¸¸
- éªŒè¯æ—¶é—´æˆ³æ ¼å¼å’ŒèŒƒå›´
- æ£€æŸ¥æ•°æ®å®Œæ•´æ€§
- ç¡®è®¤åæ ‡ç³»ç»Ÿä¸€è‡´æ€§

#### 3. Webç•Œé¢æ— æ³•è®¿é—®
- ç¡®è®¤ç«¯å£6500æœªè¢«å ç”¨
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
- éªŒè¯æ‰€æœ‰ä¾èµ–åŒ…å·²æ­£ç¡®å®‰è£…
- å°è¯•ä½¿ç”¨ä¸åŒçš„æµè§ˆå™¨æˆ–æ¸…é™¤ç¼“å­˜

## ğŸ“ Gitç‰ˆæœ¬æ§åˆ¶

é¡¹ç›®å·²é…ç½® `.gitignore` æ–‡ä»¶ï¼Œä¼šè‡ªåŠ¨å¿½ç•¥ï¼š
- Pythonç¼“å­˜æ–‡ä»¶å’Œè™šæ‹Ÿç¯å¢ƒ
- æ•°æ®æ–‡ä»¶ï¼ˆ`data/` ç›®å½•ï¼‰
- åˆ†æç»“æœæ–‡ä»¶
- ç³»ç»Ÿä¸´æ—¶æ–‡ä»¶
- IDEé…ç½®æ–‡ä»¶

å¦‚éœ€åˆ†äº«æ•°æ®ï¼Œè¯·å•ç‹¬æä¾›æ•°æ®æ–‡ä»¶ã€‚

## ğŸ“„ å¼€æºåè®®

æœ¬é¡¹ç›®åŸºäº MIT åè®®å¼€æºï¼Œè¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥å¸®åŠ©æ”¹è¿›è¿™ä¸ªé¡¹ç›®ã€‚

## ğŸ“§ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- GitHub Issues: [é¡¹ç›®Issueé¡µé¢]
- åŸå§‹é¡¹ç›®: https://github.com/XiaoDcs/udp-latency

---

**æ³¨æ„**: æœ¬ç³»ç»ŸåŸºäº [XiaoDcs/udp-latency](https://github.com/XiaoDcs/udp-latency) é¡¹ç›®å¼€å‘ï¼Œç”¨äºæ— äººæœºé€šä¿¡æµ‹è¯•æ•°æ®çš„åˆ†æå’Œå¯è§†åŒ–ã€‚ 